
struct Vec3 {
  x:float;
  y:float;
  z:float;
}

struct Vec4 {
  x:float;
  y:float;
  z:float;
  w:float;
}

table ObjectProperties {
  id:string;
  location:Vec3;
  rotation:Vec3;
  scale:float;
}

table ModelCreateRequest {
  file:string;
}

table SphereCreateRequest {
  radius:float;
  texture:string;
}

table BoxCreateRequest {
  width:float;
  height:float;
  depth:float;
  texture:string;
}

union ObjectCreateRequestUnion { ModelCreateRequest, SphereCreateRequest, BoxCreateRequest }

table Matrix {
  col0:Vec4;
  col1:Vec4;
  col2:Vec4;
  col3:Vec4;
}

table UpdatedObjectProperties {
  id:string;
  sphere_radius:float;
  sphere_center:Vec3;
  matrix:Matrix;
}

table ModelUpdateRequest {
  updates:UpdatedObjectProperties;
  file:string;
}

table SphereUpdateRequest {
  updates:UpdatedObjectProperties;
  radius:float;
  texture:string;
}

table BoxUpdateRequest {
  updates:UpdatedObjectProperties;
  width:float;
  height:float;
  depth:float;
  texture:string;
}

union ObjectUpdateRequestUnion { ModelUpdateRequest, SphereUpdateRequest, BoxUpdateRequest }

table ObjectCreateRequest {
  properties:ObjectProperties;
  object:ObjectCreateRequestUnion;
}

table ObjectCreateAndUpdateRequest {
  object:ObjectUpdateRequestUnion;
}

table ObjectUpdateRequest {
  updates:UpdatedObjectProperties;
}

union MessageUnion { ObjectCreateRequest, ObjectCreateAndUpdateRequest, ObjectUpdateRequest}

table Message {
  content:[MessageUnion];
  ack:bool = false;
}

root_type Message;

